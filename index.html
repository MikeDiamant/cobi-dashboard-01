<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <title>COBI BK Dashboard</title>

        <meta name="viewport" content="initial-scale=1, maximum-scale=1">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link href="css/cobi-style.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">

    </head>

    <body>

        <div id="container"></div>

        <div id="curSpeed">-</div>
        <div id="maxSpeed">-</div>
        <div id="avrSpeed">-</div>

        <div id="curCadence">-</div>
        <div id="maxCadence">-</div>
        <div id="avrCadence">-</div>

        <div id="version"></div>

        <script src="js/cobi.js"></script>
        <script src="js/cobi-style.min.js"></script>

        <script src="js/jquery.min.js"></script>
        <script src="js/konva.js"></script>

        <script src="js/bkdashboard.js"></script>

        <script>

            jQuery(document).ready(
                function () {

                    COBI.init('token â€” can by anything right now');

                    COBI.rideService.cadence.subscribe(
                        function (cadence) {
                            console.log('Your current cadence is ' + cadence + ' rpm.');
                        }
                    );

                    COBI.hub.externalInterfaceAction.subscribe(
                        function (action) {
                            console.log('I just tapped the handlebar remote and instantly received this ' + action + ' in my Web App');
                        }
                    );

                    let BkD = new BkDashboard();

                    BkD.initView();

                    BkD.initAverageSpeedView();
                    BkD.initAverageCadenceView();

                    BkD.initSpeedCheck();
                    BkD.initCadenceCheck();

                    COBI.rideService.speed.subscribe(
                        function (value) {
                            BkD.updateCurrentSpeedView(value * 3.6);
                        }
                    );

                    COBI.tourService.averageSpeed.subscribe(
                        function (value) {
                            BkD.updateAverageSpeedView(value * 3.6);
                        }
                    );

                    COBI.rideService.cadenceAvailability.subscribe(
                        function (value) {
                            console.log('cadence available: ' + value);
                        }
                    );

                    COBI.rideService.cadence.subscribe(
                        function (value) {
                            BkD.updateCurrentCadenceView(value);
                        }
                    );

                }
            );

        </script>

    </body>

</html>
